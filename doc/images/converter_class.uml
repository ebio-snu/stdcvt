@startuml

scale 1920*1080


package "StdCvt Driver Template" {

    abstract class CvtDriver {
     - Device devices[]

     .. Company, Model, Simple Version ..
     + virtual string getversion ();
     + virtual string getmodel ();
     + virtual string getcompany ();
     + virtual int getcompanycode ();
     + virtual int getmodelcode ();

     .. Life cycle ..
     + virtual int initialize (CvtConfig option);
     + virtual int finalize ();
     + virtual int preprocess (); // read sensor data, read commands
     + virtual int postprocess (); // write sensor data, execute commands
     + virtual int processmessage ();
     .. Process ..
     + virtual Device getdevice (int index);
    }

    abstract class CvtDevice {
     - id : int
     - status : devstat_t
     - devtype : devtype_t
     - errno : int
     - errmsg : string

     - bool copyproperites (CvtDevice *pdevice);

     .. Device ID ..
     + int getid ();

     .. Device Status ..
     + devstat_t getstatus ();
     + errno_t geterrno ();
     + string geterrmsg ();

     .. Device Type ..
     + devtype_t gettype (); // Sensor, Motor, Switch, Controller

     .. Device Location ..
     + location_t getlocation (); // installation position
     + location_t setlocation (location_t loc); // installation position

     .. Data Flow ..
     + virtual bool stream(CvtDevice *pdevice);
    }

    virtual class CvtSensor {
     - unit : obsunit_t
     - value : double
     - bool copyproperites (CvtDevice *pdevice);

     + obsunit_t getunit ();
     + obsunit_t setunit (obsunit_t unit);
     + double writeobservation (double value);
     + double readobservation ();
    }

    class CvtMotor {
     + double getcurrentposition ();
     + double gettargetposition ();
     + int setposition (double position);
     + int setstop ();
     + bool stream(Motor down);
     + virtual bool stream(Sensor down);
    }

    class CvtSwitch {
     + int seton ();
     + int setoff ();
     + bool stream(Switch down);
    }

    CvtDevice <|-- CvtSensor
    CvtDevice <|-- CvtMotor
    CvtDevice <|-- CvtSwitch

    CvtDriver *-- CvtDevice
}

package "CvtDriver for B Company" #DDDDDD {
    class BCompCvtDriver {
    }

    CvtDriver <|-- BCompCvtDriver

    class BCompSensor {
    }

    class BCompMotor {
    }

    class BCompSwitch {
    }

    Sensor <|-- BCompSensor
    Motor <|-- BCompMotor
    Switch <|-- BCompSwitch

    BCompCvtDriver *-- BCompSensor
    BCompCvtDriver *-- BCompMotor
    BCompCvtDriver *-- BCompSwitch
}

@enduml
